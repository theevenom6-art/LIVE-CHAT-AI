<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VENOM AI Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-color: #202124;
    --menu-bg: rgba(17,17,17,0.95);
    --user-color: #2d89ef;
    --bot-color: #333;
    --text-color: #e0e0e0;
    --hover-color: #2d89ef33;
  }
  * { box-sizing: border-box; margin:0; padding:0; }
  body { font-family:'Roboto',sans-serif; background: var(--bg-color); color: var(--text-color); display:flex; flex-direction:column; height:100vh; overflow:hidden; }

  /* Hamburger Button */
  #menuBtn {
    position: fixed;
    top: 15px;
    left: 15px;
    z-index: 1000;
    background: var(--user-color);
    color: #fff;
    border: none;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }

  /* Popup Menu */
  #popupMenu {
    position: fixed;
    top:0;
    left:0;
    width:0;
    height:100%;
    background-color: var(--menu-bg);
    overflow-x:hidden;
    transition:0.3s;
    z-index:999;
    padding-top:60px;
  }
  #popupMenu .menu-item {
    padding:15px 20px;
    cursor:pointer;
    transition: background 0.3s, transform 0.2s;
  }
  #popupMenu .menu-item:hover {
    background: var(--hover-color);
    transform: scale(1.05);
  }
  #popupMenu .menu-item.active {
    background: var(--user-color);
    color:#fff;
  }

  /* Chat area */
  #chatContainer { flex:1; display:flex; flex-direction:column; padding:20px; overflow-y:auto; margin-top:60px; }
  .message { max-width:70%; padding:10px 15px; margin-bottom:10px; border-radius:12px; line-height:1.4em; word-wrap:break-word; }
  .user { background: var(--user-color); align-self:flex-end; text-align:right; color:white; }
  .bot { background: var(--bot-color); align-self:flex-start; text-align:left; color:#ddd; }

  /* Input bar */
  #inputBar { display:flex; padding:10px; background:#1a1a1a; border-top:1px solid #333; }
  #userInput { flex:1; padding:12px 15px; border-radius:25px; border:none; outline:none; background:#111; color: var(--text-color); margin-right:10px; }
  #sendBtn { padding:12px 20px; border-radius:25px; border:none; background: var(--user-color); color:#fff; cursor:pointer; font-weight:500; transition:0.3s; }
  #sendBtn:hover { background:#1b5dab; transform:scale(1.05); }
</style>
</head>
<body>

<button id="menuBtn">â˜° Menu</button>

<div id="popupMenu">
  <div class="menu-item active" data-tab="chat">Chat</div>
  <div class="menu-item" data-tab="voice">Voice Settings</div>
  <div class="menu-item" data-tab="history">History</div>
  <div class="menu-item" data-tab="api">API Info</div>
  <div class="menu-item" data-tab="settings">Settings</div>
</div>
  <div id="voiceSettings" style="display:none; padding: 20px;">
  <label for="characterSelect">Select Character Voice:</label>
  <select id="characterSelect">
    <option value="alloy">Alloy</option>
    <option value="aria">Aria</option>
    <option value="rex">Rex</option>
  </select>
  <button id="playTestBtn">Play Test Voice</button>
</div>

<div id="chatContainer">
  <div class="message bot">ðŸ¤– Welcome to VENOM AI. Your voice-enabled assistant is ready!</div>
</div>

<div id="inputBar">
  <input type="text" id="userInput" placeholder="Type your message..."/>
  <button id="sendBtn">Send</button>
</div>

<script>
  // Hamburger toggle
  const menuBtn = document.getElementById('menuBtn');
  const popupMenu = document.getElementById('popupMenu');
  let menuOpen = false;
  menuBtn.addEventListener('click', () => {
    popupMenu.style.width = menuOpen ? '0' : '250px';
    menuOpen = !menuOpen;
  });

  // Menu item click
  const tabs = document.querySelectorAll('#popupMenu .menu-item');
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t=>t.classList.remove('active'));
      tab.classList.add('active');
      console.log('Switched to tab:', tab.dataset.tab);
    });
  });

  const sendBtn = document.getElementById('sendBtn');
  const input = document.getElementById('userInput');
  const chatBox = document.getElementById('chatContainer');

  function appendMessage(sender, text) {
    const msg = document.createElement('div');
    msg.classList.add('message', sender);
    msg.innerText = text;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  sendBtn.addEventListener('click', () => {
    const text = input.value.trim();
    if(!text) return;
    appendMessage('user', text);
    input.value='';
    setTimeout(()=>appendMessage('bot','ðŸ¤– [Bot response placeholder]'),600);
  });

  input.addEventListener('keydown', e=>{ if(e.key==='Enter') sendBtn.click(); });
  const voiceTab = document.querySelector('[data-tab="voice"]');
const voiceSettings = document.getElementById('voiceSettings');
const characterSelect = document.getElementById('characterSelect');
const playTestBtn = document.getElementById('playTestBtn');

// Toggle voice settings visibility
voiceTab.addEventListener('click', () => {
  voiceSettings.style.display = voiceSettings.style.display === 'none' ? 'block' : 'none';
});

// ElevenLabs API key
const ELEVEN_KEY = 'sk_bd78e0a8be84f60dd48617e466ce55fa5ac0a27fa5c7a832';

// Play TTS test
playTestBtn.addEventListener('click', async () => {
  const selectedVoice = characterSelect.value;
  const text = `Hello, this is a test voice for ${selectedVoice}!`;

  try {
    const res = await fetch('https://api.elevenlabs.io/v1/text-to-speech/' + selectedVoice, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'xi-api-key': ELEVEN_KEY
      },
      body: JSON.stringify({ text })
    });

    const blob = await res.blob();
    const audioUrl = URL.createObjectURL(blob);
    const audio = new Audio(audioUrl);
    audio.play();
  } catch (err) {
    console.error('TTS playback failed:', err);
    alert('Failed to play voice.');
  }
});
</script>
</body>
</html>
